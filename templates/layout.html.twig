{% set STRIPE_PUBLIC_KEY = render(controller('App\\Controller\\ApiConfigController::getValueByKey', {'key':'STRIPE_PUBLIC_KEY'})) %}

{% extends 'base.html.twig' %}

{% block meta %}
{% endblock %}

{% block stylesheets %}
  <!-- Begin loading animation -->
  <!--Floating WhatsApp css-->
  <link rel="stylesheet" href="https://rawcdn.githack.com/rafaelbotazini/floating-whatsapp/3d18b26d5c7d430a1ab0b664f8ca6b69014aed68/floating-wpp.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css" integrity="sha256-PHcOkPmOshsMBC+vtJdVr5Mwb7r0LkSVJPlPrp/IMpU=" crossorigin="anonymous" />
  <link href="{{ asset('assets/css/loaders/loader-pulse.css')}}" rel="stylesheet" type="text/css" media="all" />
  <!-- End loading animation -->
  <link href="{{ asset('assets/css/main.css')}}" rel="stylesheet" type="text/css" media="all" />
  <link href="{{ asset('assets/css/theme.css')}}" rel="stylesheet" type="text/css" media="all" />
  <link href="https://fonts.googleapis.com/css?family=Nunito:400,400i,600,700&display=swap" rel="stylesheet">
  <style type="text/css">
    button, .btn{outline: none!important;}
    .cart-btn{padding: 1px 13px}
    .item-elt-foot{
      display: flex;
      flex-direction: column;
      align-items: left;
    }
    .item-elt-foot .nav{display: block!important }
    .item-elt-foot .nav .nav-link{display: inline-block;}
        
    .toast__container{z-index: 99999!important}
    .navbar img.logo{width: 140px}
    .navbar img.logo.scrolled-logo {display: none;}
    .navbar.scrolled img.logo.default-logo {display: none;}
    .navbar.scrolled img.logo.scrolled-logo {display: block;}
    .floating-wpp{
      bottom: 20px;
      z-index: 9999;
    }
    .floating-wpp .floating-wpp-button{
      width: 55px!important;
      height: 55px!important;
    }
    .floating-wpp .floating-wpp-popup.active{
      bottom: 60px;
    }
    .floating-wpp:hover{bottom: 21px;}
    html {
      scroll-behavior: smooth;
    }
    ul{list-style: none;}
    .cart-wrapper {
      position: fixed;
      top: 0;
      height: 100vh;
      width: 290px;
      background: #fff;
      z-index: 1055;
      padding: 45px 20px 10px;
      transition: linear .2s right;
      right: -290px;
      overflow-y: auto;
      box-shadow: 0px 5px 25px -5px rgba(0, 0, 0, 0.1);
      font-size: 14px;
    }
    .cart-wrapper.open{right: 0}
    .cart-wrapper .product-item img.product-img {
      height: 60px;
      width: 80px;
      object-fit: cover;
      border-radius: 5px;
      box-shadow: 0px 5px 15px -5px rgba(0, 0, 0, 0.1);
      float: left;
      margin-right: 13px;
    }
    .cart-wrapper .product-item ul.detail-list {
      padding-left: 14px;
    }
    .cart-wrapper .form-coupon{
      display: flex;
      align-items: stretch;
    }
    .cart-wrapper .form-coupon .valide-coupon {
      background: #009b72;
      color: #fff;
      width: 105px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    .cart-wrapper .totaux{
      padding: 0;
      line-height: 27px;
      margin-top: 25px;
    }
    .cart-wrapper .totaux > .item > span:last-child {
      font-weight: 800;
      float: right;
    }
    .cart-wrapper .form-control, .cart-wrapper .form-control:focus{
      border-radius: 0!important;
    }
    .cart-wrapper .toggle-cart{
      cursor: pointer;
      position: absolute;
      top: 12px;
      color: #888;
    }

    /**
     * The CSS shown here will not be introduced in the Quickstart guide, but shows
     * how you can use CSS to style your Element's container.
     */
    .StripeElement {
      box-sizing: border-box;

      height: 40px;

      padding: 10px 12px;

      border: 1px solid transparent;
      border-radius: 4px;
      background-color: white;

      -webkit-transition: box-shadow 150ms ease;
      transition: box-shadow 150ms ease;
      border:1px solid #f4f4f4;
    }

    .StripeElement--focus {
      box-shadow: 0 1px 3px 0 #cfd7df;
    }

    .StripeElement--invalid {
      border-color: #fa755a;
    }

    .StripeElement--webkit-autofill {
      background-color: #fefde5 !important;
    }
    #card-errors{color: #c31b1b}
    /*#modal-payment button.submit {
        cursor: pointer;
        display: inline-block;
        height: 40px;
        width: 100%;
        margin-top: 40px;
        font-size: 15px;
        font-weight: 600;
        line-height: 40px;
        letter-spacing: 0.025em;
        text-decoration: none;
        white-space: nowrap;
        background: #b64645;
        color: #fff;
        border: none;
        outline: none;
        border-radius: 4px;
        box-shadow: 0 4px 6px rgba(50, 50, 93, .11), 0 1px 3px rgba(0, 0, 0, .08);
        -webkit-transition: all 150ms ease;
        transition: all 150ms ease;
    }*/
    #modal-payment .paid-head{
        text-align: center;
        color: #b64645;
        margin-top: 15px;
    }
    .lds-ripple {
        display: none;
        width: 80px;
        height: 80px;
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        margin: auto;
        transform: translateY(-50%);
        z-index: 50;
    }
    .lds-ripple div {
      position: absolute;
      border: 4px solid green;
      opacity: 1;
      border-radius: 50%;
      animation: lds-ripple 1s cubic-bezier(0, 0.2, 0.8, 1) infinite;
    }
    .lds-ripple div:nth-child(2) {
      animation-delay: -0.5s;
    }
    @keyframes lds-ripple {
      0% {
        top: 36px;
        left: 36px;
        width: 0;
        height: 0;
        opacity: 1;
      }
      100% {
        top: 0px;
        left: 0px;
        width: 72px;
        height: 72px;
        opacity: 0;
      }
    }
    .form-group{margin-bottom: 5px;}
    #modal-payment .modal-dialog, #sign-in-modal .modal-dialog{max-width: 400px;}
    .list-cart{
      position: absolute;
    }
    .list-inline-item:not(:last-child){margin-right: 0}
    .list-inline-item .fa-2x {
      color: #009b72!important;
      font-size: 1.7em;
    }

    /**
     * Extracted from: SweetAlert
     * Modified by: Istiak Tridip
     */
    .success-checkmark {
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        transform: translateY(-50%);
        z-index: 60;
      width: 80px;
      height: 115px;
      margin: 0 auto;
      display: none;
    }
    .success-checkmark .check-icon {
      width: 80px;
      height: 80px;
      position: relative;
      border-radius: 50%;
      box-sizing: content-box;
      border: 4px solid #4CAF50;
      display: none;
    }
    .success-checkmark .check-icon::before {
      top: 3px;
      left: -2px;
      width: 30px;
      transform-origin: 100% 50%;
      border-radius: 100px 0 0 100px;
    }
    .success-checkmark .check-icon::after {
      top: 0;
      left: 30px;
      width: 60px;
      transform-origin: 0 50%;
      border-radius: 0 100px 100px 0;
      animation: rotate-circle 4.25s ease-in;
    }
    .success-checkmark .check-icon::before, .success-checkmark .check-icon::after {
      content: '';
      height: 100px;
      position: absolute;
      background: #FFFFFF;
      transform: rotate(-45deg);
    }
    .success-checkmark .check-icon .icon-line {
      height: 5px;
      background-color: #4CAF50;
      display: block;
      border-radius: 2px;
      position: absolute;
      z-index: 10;
    }
    .success-checkmark .check-icon .icon-line.line-tip {
      top: 46px;
      left: 14px;
      width: 25px;
      transform: rotate(45deg);
      animation: icon-line-tip 0.75s;
    }
    .success-checkmark .check-icon .icon-line.line-long {
      top: 38px;
      right: 8px;
      width: 47px;
      transform: rotate(-45deg);
      animation: icon-line-long 0.75s;
    }
    .success-checkmark .check-icon .icon-circle {
      top: -4px;
      left: -4px;
      z-index: 10;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      position: absolute;
      box-sizing: content-box;
      border: 4px solid rgba(76, 175, 80, 0.5);
    }
    .success-checkmark .check-icon .icon-fix {
      top: 8px;
      width: 5px;
      left: 26px;
      z-index: 1;
      height: 85px;
      position: absolute;
      transform: rotate(-45deg);
      background-color: #FFFFFF;
    }

    @keyframes rotate-circle {
      0% {
        transform: rotate(-45deg);
      }
      5% {
        transform: rotate(-45deg);
      }
      12% {
        transform: rotate(-405deg);
      }
      100% {
        transform: rotate(-405deg);
      }
    }
    @keyframes icon-line-tip {
      0% {
        width: 0;
        left: 1px;
        top: 19px;
      }
      54% {
        width: 0;
        left: 1px;
        top: 19px;
      }
      70% {
        width: 50px;
        left: -8px;
        top: 37px;
      }
      84% {
        width: 17px;
        left: 21px;
        top: 48px;
      }
      100% {
        width: 25px;
        left: 14px;
        top: 45px;
      }
    }
    @keyframes icon-line-long {
      0% {
        width: 0;
        right: 46px;
        top: 54px;
      }
      65% {
        width: 0;
        right: 46px;
        top: 54px;
      }
      84% {
        width: 55px;
        right: 0px;
        top: 35px;
      }
      100% {
        width: 47px;
        right: 8px;
        top: 38px;
      }
    }
    .box-error-payment{
      display: none;
      position: absolute;
      top: 0;
      width: 100%;
      left: 0;
      z-index: 2;
    }

    /* custom nan reponsive */
    .navbar.navbar-toggled-show img.logo.default-logo{
      display: block;
      margin-left: 1rem;
    }
    .navbar.navbar-toggled-show img.logo.scrolled-logo{
      display: none;
    }
    .navbar.navbar-toggled-show .right-close{
      margin-right: 1rem;
    }
    .navbar.navbar-toggled-show .navbar-collapse{
      background: #fff;
    }
    .navbar.navbar-toggled-show .navbar-nav{margin: 0!important;}
    .navbar.navbar-toggled-show{
      text-align: center;
      background: rgb(34, 155, 114);
      padding: 0;
    }
    .navbar.navbar-toggled-show > .container{
      max-width: 100%;
    }
    .navbar.navbar-toggled-show li.nav-item:nth-child(2n + 1) {
      background: #fdf2f5;
    }
    .navbar.navbar-toggled-show li.nav-item:nth-child(2n) {
      background: #f1fdf9;
    }
    .navbar.navbar-toggled-show li.nav-item:last-child {
      background: #fff;
    }
    .navbar li.nav-item:last-child{display: none;}
    .navbar.navbar-toggled-show li.nav-item:last-child{display: block;}
    .navbar.navbar-toggled-show li.nav-item:last-child > div {
      display: block;
      padding: 5rem 0 2rem;
      max-width: 200px;
      margin: auto;
      display: flex;
      justify-content: space-around;
    }
    .navbar.navbar-toggled-show li.nav-item:last-child > div > .fa{
      font-weight: 600;
      background-color: #229b72;
      border-radius: 30px;
      color: #fff;
      display: inline-block;
      height: 25px;
      line-height: 25px;
      margin: auto 3px;
      width: 25px;
      font-size: 13px;
      text-align: center;
      cursor: pointer;
    }
    .navbar.navbar-toggled-show.navbar-dark .navbar-nav .nav-link{
      color: #333;
      line-height: 2em;
    }

    .navbar.navbar-toggled-show.navbar-dark .navbar-toggler svg [stroke]:not([stroke="none"]){stroke: #fff!important;}
    .navbar .shopping-cart{
      color: #fff;
    }
    @media(max-width: 992px){
      .separe-nav-xs{
        width: 2px;
        height: 30px;
        background: #fff;
        margin: 0 .5rem 0 1rem;
      }
      .cart-btn{
        background: transparent;
        border: none;
        font-size: 20px;
        padding: 0;
      }
      .navbar.scrolled .shopping-cart{
        color: #2C3038;
      }
      .navbar.navbar-toggled-show.scrolled .shopping-cart{
        color: #fff;
      }
      .navbar.scrolled .separe-nav-xs{
        background: #2C3038;
      }
      .navbar.navbar-toggled-show.scrolled .separe-nav-xs{
        background: #fff;
      }
      .navbar.navbar-toggled-show{
        box-shadow: 0px -1px 25px -5px rgba(0, 0, 0, 0.1);
      }
    }
  </style>
{% endblock %}

{% block body %}

    <div class="loader">
      <div class="loading-animation"></div>
    </div>
    <div class="navbar-container">
      <nav class="navbar navbar-expand-lg navbar-light" data-overlay data-sticky="top">
        <div class="container">
          <a class="navbar-brand navbar-brand-dynamic-color fade-page" href="index.html">
            <img alt="Jumpstart"  src="https://www.brulafine.com/assets/images/brulafine-logo.svg">
          </a>
          <div class="d-flex align-items-center order-lg-3">
            
            {% if is_granted('IS_AUTHENTICATED_FULLY') %}
            <a href="{{ path('app_logout') }}" class="btn btn-primary ml-lg-4 mr-3 mr-md-4 mr-lg-0 d-none d-sm-block order-lg-3">Deconnexion</a>

            {% else %}   
            <a href="{{ path('app_login') }}" class="btn btn-primary ml-lg-4 mr-3 mr-md-4 mr-lg-0 d-none d-sm-block order-lg-3">Connexion</a>

            {% endif %}
            <button aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target=".navbar-collapse" data-toggle="collapse" type="button">
              <img alt="Navbar Toggler Open Icon" class="navbar-toggler-open icon icon-sm" data-inject-svg src="assets/img/icons/interface/icon-menu.svg">
              <img alt="Navbar Toggler Close Icon" class="navbar-toggler-close icon icon-sm" data-inject-svg src="assets/img/icons/interface/icon-x.svg">
            </button>
          </div>
          <div class="collapse navbar-collapse order-3 order-lg-2 justify-content-lg-end" id="navigation-menu">
            <ul class="navbar-nav my-3 my-lg-0">
              <li class="nav-item">
                <div>
                  <a aria-haspopup="true" class="nav-link nav-item"  href="{{path('home')}}" role="button">Accueil</a>
                </div>
              </li>
              <li class="nav-item">
                <div>
                  <a aria-haspopup="true" class="nav-link nav-item"  href="#" role="button">Produit</a>
                </div>
              </li>
              <li class="nav-item">
                <div>
                  <a aria-haspopup="true" class="nav-link nav-item"  href="#" role="button">Marque</a>
                </div>
              </li>
              <li class="nav-item">
                <div>
                  <a aria-haspopup="true" class="nav-link nav-item"  href="#" role="button">Temoignage</a>
                </div>
              </li>
              <li class="nav-item">
                <div>
                  <a aria-haspopup="true" class="nav-link nav-item"  href="{{path('contact')}}" role="button">Contact</a>
                </div>
              </li>
              <li class="nav-item">
                <div>
                  <a aria-expanded="false" aria-haspopup="true" class="nav-link nav-item" data-toggle="dropdown-grid" href="{{path('contact')}}" role="button">Aide</a>
                </div>
              </li>

              {% if is_granted('IS_AUTHENTICATED_FULLY') %}
              <li class="nav-item">
                <div>
                  <a aria-expanded="false" aria-haspopup="true" class="nav-link nav-item" data-toggle="dropdown-grid" href="{{path('account')}}" role="button">Mon compte</a>
                </div>
              </li>
              {% endif %}
            </ul>
          </div>
        </div>
      </nav>
    </div>

    {% block body_web %}

    <div class="o-hidden" data-overlay="" style="padding-top: 100px !important;">
      <section class="pb-0 no-border-bottom" >
        <div class="container">
          <div class="row align-items-center justify-content-center justify-content-lg-between text-center text-lg-left">
            <div class="col-md-9 col-lg-6 col-xl-5 pl-lg-5 pl-xl-0 order-lg-2 aos-init aos-animate" data-aos="fade-left" data-aos-delay="250">

              <!-- <h1 class="display-3">Brulafine<mark data-aos="highlight-text" data-aos-delay="500" class="aos-init aos-animate">change makers</mark></h1> -->

              <h1 class="display-3">Nutridia<br> <mark><span data-typed-text data-loop="true" data-type-speed="100" data-strings='["Brûle-graisse","Naturel","100% Végane"]'></span></mark></h1>
              <p class="lead">
               Une gélule composée de trois actifs brûleurs de graisse naturels particulièrement efficaces pour vaincre les kilos en trop *
              </p>
              <div class="d-flex flex-column flex-sm-row mt-4 mt-md-5 justify-content-center" data-aos="fade-up" data-aos-delay="300">
                <a href="#landing-pages" class="btn btn-primary btn-lg mx-sm-2 my-1 my-sm-0" data-smooth-scroll>Acheter Maintenant</a>
                <!-- <a href="#" class="btn btn-outline-primary btn-lg mx-sm-2 my-1 my-sm-0">Purchase</a> -->
              </div>
            </div>
            <div class="col-md-8 col-lg-6 mt-4 mt-md-5 mt-lg-0 order-lg-1 aos-init aos-animate" data-aos="fade-right">
              <!-- <img src="https://www.brulafine.com/assets/images/product/hero.png" alt="Image" class="rounded img-fluid"> -->
                <div class="rounded o-hiddenp">
                  <video class="plyr" src="https://www.youtube.com/embed/5LdC6k3oT2I"  poster="https://www.brulafine.com/assets/images/product/hero.png" >
                  </video>
                </div>


            </div>
          </div>
        </div>
        <div class="position-absolute w-50 h-100 top right" data-jarallax-element="50" style="z-index: 0; transform: translate3d(0px, -47.9351px, 0px);">
          <div class="blob bg-primary opacity-20 w-100 h-100 top left"></div>
        <div id="jarallax-container-0" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; overflow: hidden; pointer-events: none; z-index: -100;"><div style="position: fixed;"></div></div></div>
        <div class="divider divider-bottom bg-primary-3"></div>
      </section>
    </div>


    <section class="bg-primary-3 text-white bg" style="padding: 3.5rem 0;">
      <div class="container">
        <div class="justify-content-center">
          <h4 style="text-align: center;margin-bottom: 25px;">Brulafine, une trilogie brûle-graisse au service de votre minceur !</h4>
        </div>
        <div class="row justify-content-center">
          <div class="col-lg-6 mb-3 mb-md-4" data-aos="fade-up" data-aos-delay="100">
            <div class="card card-body bg-white align-items-start flex-sm-row">
              <img src="assets/img/icons/interface/icon-check.svg" alt="Icon for Settings-1" class="icon bg-primary mb-4 mb-sm-0" >
              <div class="ml-sm-3 ml-md-4">
                <h5>Formule minceur exclusive</h5>
                <p>
                  Unique en France, aucun autre laboratoire n’a misé sur une telle association pour une gélule efficace comme celle-ci.
                </p>
              </div>
            </div>
          </div>
          <div class="col-lg-6 mb-3 mb-md-4" data-aos="fade-up" data-aos-delay="200">
            <div class="card card-body bg-white align-items-start flex-sm-row">
              <img src="assets/img/icons/interface/icon-check.svg" alt="Icon for Settings-1" class="icon bg-primary mb-4 mb-sm-0" >
              <div class="ml-sm-3 ml-md-4">
                <h5>C-Konjac, coupe-faim végétal</h5>
                <p>
                  En association avec le coup-faim naturel le plus puissant, offre des résultats encore plus efficaces et durables.
                </p>
              </div>
            </div>
          </div>
          <div class="col-lg-6 mb-3 mb-md-4" data-aos="fade-up" data-aos-delay="300">
            <div class="card card-body bg-white align-items-start flex-sm-row">
              <img src="assets/img/icons/interface/icon-check.svg" alt="Icon for Settings-1" class="icon bg-primary mb-4 mb-sm-0" >
              
              <div class="ml-sm-3 ml-md-4">
                <h5>Triple efficacité renforcée *</h5>
                <p>
                  Avec seulement 2 gélules par jour, les résultats sont là !
                </p>
              </div>
            </div>
          </div>
          <div class="col-lg-6 mb-3 mb-md-4" data-aos="fade-up" data-aos-delay="400">
            <div class="card card-body bg-white align-items-start flex-sm-row">
              <img src="assets/img/icons/interface/icon-check.svg" alt="Icon for Settings-1" class="icon bg-primary mb-4 mb-sm-0" >
              <div class="ml-sm-3 ml-md-4">
                <h5>Essayez nos produits en toute sérénité</h5>
                <p>
                  Grâce à notre option exclusive : “Satisfait ou Remboursé” !
                </p>
              </div>

            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="pb-0">
      <div class="container">
        <h2 style="text-align: center;margin-bottom: 40px;">Comment Brulafine peut-il autant brûler les graisses ?</h2>
        <div class="row">
          <div class="col-md-6 col-lg-4 mb-3 mb-md-4">
            <div class="card h-100 hover-box-shadow">
              <div class="d-block bg-gradient rounded-top position-relative">
                <img class="card-img-top hover-fade-out" src="https://www.brulafine.com/assets/images/product/ingredients/vert.jpg" alt="Image accompanying Treva testimonial">
              </div>
              <div class="card-body">
                <h3>Thé Vert riche en EGCG</h3>
                <h6>(Camellia sinensis [L. ] Kuntze)</h6>
                <p style="font-size: 15px;">
                  * Aide à stimuler et accroître l’oxydation des graisses<br>
                  * Aide à la réduction de la masse graisseuse<br>
                  * Aide à améliorer et accroître le métabolisme<br>
                  * Aide à maintenir et contrôler le poids
                </p>
                <!-- <a href="#" class="stretched-link">Read Story</a> -->
              </div>
            </div>
          </div>
          <div class="col-md-6 col-lg-4 mb-3 mb-md-4">
            <div class="card h-100 hover-box-shadow">
              <div class="d-block bg-gradient rounded-top position-relative">
                <img class="card-img-top hover-fade-out" src="https://www.brulafine.com/assets/images/product/ingredients/guarana.jpg" alt="Image accompanying Ztos testimonial">
              </div>
              <div class="card-body">
                <h3>Guarana</h3>
                <h6>(Paullinia cupana Kunth)</h6>
                <p>
                  * Aide à brûler la graisse <br>
                  * Aide à lutter contre les capitons <br>
                  * Aide à accroître le métabolisme <br>
                  * Aide à augmenter les dépenses énergétiques <br>
                  * Aide à encourager l’oxydation des graisses <br>
                  * Aide à soutenir la perte de poids
                </p>
                <!-- <a href="#" class="stretched-link">Read Story</a> -->
              </div>
            </div>
          </div>
          <div class="col-md-6 col-lg-4 mb-3 mb-md-4">
            <div class="card h-100 hover-box-shadow">
              <div class="d-block bg-gradient rounded-top position-relative">
                <img class="card-img-top hover-fade-out" src="https://www.brulafine.com/assets/images/product/ingredients/kola.jpg" alt="Image accompanying Utosia testimonial">
              </div>
              <div class="card-body">
                <h3>Kola</h3>
                <h6>(Cola nitida [Vent.] Schott et Endl.)</h6>
                <p>
                  * Aide à brûler les graisses <br>
                  * Aide à soutenir l’amincissement <br>
                  * Aide au contrôle du poids 
                </p>
                <!-- <a href="#" class="stretched-link">Read Story</a> -->
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex flex-column flex-sm-row mt-4 mt-md-3 mt-md-3 mb-sm-5 justify-content-center" data-aos="fade-up" data-aos-delay="300">
          <a href="#landing-pages" class="btn btn-primary btn-lg mx-sm-2 my-1 my-sm-0" data-smooth-scroll>Fiches détaillées  des ingrédients utilisés</a>
        </div>
      </div>
    </section>


    <section class="bg-primary">
      <div class="container">
        <div class="text-white">
          <div class="row section-title justify-content-center text-center">
            <div class="col-md-9 col-lg-8 col-xl-7">
              <h3 class="display-4">Avis des clients *</h3>
              <div class="lead">Nos clients temoignent, de la qualite du produit, ils ont perdu du poids avec quelques semaines.</div>
            </div>
          </div>
        </div>
        <div class="row" data-isotope-collection data-ignore-hash="true">
          <div class="col-sm-6 col-lg-4 mb-3 mb-md-4" data-isotope-item>
            <div class="card card-body">
              <p>
              “J’ai tout tenté pour perdre mes 12kg Mais rien à marché ! Et là je découvre par hasard Castalis! Je suis heureuse de pouvoir dire que <mark data-aos='highlight-text' data-aos-delay='200'>j’ai déjà perdu 4kg en 1 mois</mark>, je n’ai plus de fringales. j’étais malheureuse et là j’ apprécie de nouveau mon corps :)”*</p>
              <div class="d-flex">
                <img src="assets/img/avatars/female-2.jpg" alt="Themeforest">
                <div class="ml-3">
                  <h6 class="mb-0">28 ans - 4kg en 1 mois</h6>
                  <div>Marika, Hem</div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-lg-4 mb-3 mb-md-4" data-isotope-item>
            <div class="card card-body">
              <p>
                “En 2 mois avec un petit régime en plus <mark data-aos='highlight-text' data-aos-delay='200'>j'ai perdu 7 kilo</mark>.”*
              </p>
              <div class="d-flex">
                <img src="assets/img/avatars/female-7.jpg" alt="Themeforest">
                <div class="ml-3">
                  <h6 class="mb-0">40 ans - 7kg en 1 mois</h6>
                  <div>Alvina, Bierges</div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-lg-4 mb-3 mb-md-4" data-isotope-item>
            <div class="card card-body">
              <p>
              “J’ai commencé le 04 avril <mark data-aos='highlight-text' data-aos-delay='200'>J’ai perdue entre 3&4kilos Effect de’’ sasieté ‘’ plutôt pas mal</mark>, on sent bien le moment où l’on a plus envie d’aller plus loin lorsque l’on mange.”*
              </p>
              <div class="d-flex">
                <img src="assets/img/avatars/male-2.jpg" alt="Themeforest">
                <div class="ml-3">
                  <h6 class="mb-0">45 ans - 4kg en 1 mois</h6>
                  <div>Frédérique, Tourcoing</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex flex-column flex-sm-row mt-4 mt-md-3 mt-md-3 mb-sm-5 justify-content-center" data-aos="fade-up" data-aos-delay="300">
          <a href="#landing-pages" class="btn btn-primary btn-lg mx-sm-2 my-1 my-sm-0" data-smooth-scroll>Voir tous les temoignages</a>
        </div>
      </div>
      </div>
    </section>
    <section class="bg-light py-5">
      <div class="container">
        <div class="row">
          <div class="col">
            <div class="d-flex flex-column flex-lg-row no-gutters border rounded bg-white o-hidden">
              <a href="#" class="d-block position-relative bg-gradient col-xl-5">
                <img class="flex-fill hover-fade-out" src="https://www.brulafine.com/assets/images/product/ingredients/konjac.jpg" alt="blog.1.image">
                <div class="divider divider-side bg-white d-none d-lg-block"></div>
              </a>
              <div class="p-4 p-md-5 col-xl-7 d-flex align-items-center">
                <div class="p-lg-4 p-xl-5">
                  <a href="#">
                    <h1>Konjac riche en glucomannane</h1>
                    <h6>Effet coupe-faim confirmé par l’avis positif de l’EFSA (Autorité Européenne de Sécurité des Aliments) :</h6>
                  </a>
                  <p class="lead">
                    “Le glucomannane, consommé dans le cadre d’un régime hypocalorique, contribue à la perte de poids.”
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-3 mt-lg-5">
          <div class="col-lg-3 my-2 my-md-3 my-lg-0">
            <div class="row">
              <a class="col-5 img-quality" href="#">
                <img class="rounded img-fluid hover-fade-out" src="https://www.brulafine.com/assets/images/footer-icon-01.svg" alt="blog.2.image">
              </a>
              <div class="col font-reduce" >
                <a class="h6" href="#">NATUREL</a>
                <div class="text-small text-muted mt-2">Ingrédients végétaux, sains et efficaces.</div>
              </div>
            </div>
          </div>
          <div class="col-lg-3 my-2 my-md-3 my-lg-0">
            <div class="row">
              <a class="col-5 img-quality" href="#">
                <img class="rounded img-fluid hover-fade-out" src="https://www.brulafine.com/assets/images/footer-icon-03.svg" alt="blog.3.image">
              </a>
              <div class="col font-reduce">
                <a class="h6" href="#">LIVRAISON 24/48H</a>
                <div class="text-small text-muted mt-2">En France et dans le monde, Colissimo et UPS.</div>
              </div>
            </div>
          </div>
          <div class="col-lg-3 my-2 my-md-3 my-lg-0">
            <div class="row">
              <a class="col-5 img-quality" href="#">
                <img class="rounded img-fluid hover-fade-out" src="https://www.brulafine.com/assets/images/footer-icon-05.svg" alt="blog.4.image">
              </a>
              <div class="col font-reduce">
                <a class="h6" href="#">LIVRAISON GRATUITE</a>
                <div class="text-small text-muted mt-2">Frais de port offerts dès 0 € d’achat</div>
              </div>
            </div>
          </div>
          <div class="col-lg-3 my-2 my-md-3 my-lg-0">
            <div class="row">
              <a class="col-5 img-quality" href="#">
                <img class="rounded img-fluid hover-fade-out" src="https://www.brulafine.com/assets/images/footer-icon-07.svg" alt="blog.4.image">
              </a>
              <div class="col font-reduce">
                <a class="h6" href="#">SATISFAIT OU REMBOURSÉ</a>
                <div class="text-small text-muted mt-2">Pour un confort et une satisfaction maximum.</div>
              </div>
            </div>
          </div>



          <div class="col-lg-3 my-2 my-md-3 my-lg-0">
            <div class="row">
              <a class="col-5 img-quality" href="#">
                <img class="rounded img-fluid hover-fade-out" src="https://www.brulafine.com/assets/images/footer-icon-02.svg" alt="blog.4.image">
              </a>
              <div class="col font-reduce">
                <a class="h6" href="#">PAIEMENT SÉCURISÉ</a>
                <div class="text-small text-muted mt-2">Carte Bleue, Visa, Verified by VISA, Mastercard, SecureCode</div>
              </div>
            </div>
          </div>


          <div class="col-lg-3 my-2 my-md-3 my-lg-0">
            <div class="row">
              <a class="col-5 img-quality" href="#">
                <img class="rounded img-fluid hover-fade-out" src="https://www.brulafine.com/assets/images/footer-icon-06.svg" alt="blog.4.image">
              </a>
              <div class="col font-reduce">
                <a class="h6" href="#">CARTE FIDÉLITÉ</a>
                <div class="text-small text-muted mt-2">Des réductions pour vous et pour vos amis.</div>
              </div>
            </div>
          </div>

          <div class="col-lg-3 my-2 my-md-3 my-lg-0">
            <div class="row">
              <a class="col-5 img-quality" href="#">
                <img class="rounded img-fluid hover-fade-out" src="https://www.brulafine.com/assets/images/footer-icon-08.svg" alt="blog.4.image">
              </a>
              <div class="col font-reduce">
                <a class="h6" href="#">RAPPORT QUALITÉ/PRIX</a>
                <div class="text-small text-muted mt-2">Pour des produits au prix le plus juste.</div>
              </div>
            </div>
          </div>

          <div class="col-lg-3 my-2 my-md-3 my-lg-0">
            <div class="row">
              <a class="col-5 img-quality" href="#">
                <img class="rounded img-fluid hover-fade-out" src="https://www.brulafine.com/assets/images/footer-icon-04.svg" alt="blog.4.image">
              </a>
              <div class="col font-reduce">
                <a class="h6" href="#">FABRIQUÉ EN FRANCE</a>
                <div class="text-small text-muted mt-2">Engagement local, Production locale.</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    {% endblock body_web %}

    <footer class="bg-primary-3 text-white links-white pb-4 footer-1">
      <div class="container">
        <div class="row">
          <div class="col-xl-auto mr-xl-5 col-md-3 mb-4 mb-md-0">
            <h5>Navigation</h5>
            <ul class="nav flex-row flex-md-column">
              <li class="nav-item mr-3 mr-md-0">
                <a href="landing-1.html" class="nav-link fade-page px-0 py-2">Accueil</a>
              </li>
              <li class="nav-item mr-3 mr-md-0">
                <a href="landing-2.html" class="nav-link fade-page px-0 py-2">Ingrédients</a>
              </li>
              <li class="nav-item mr-3 mr-md-0">
                <a href="landing-3.html" class="nav-link fade-page px-0 py-2">Témoignages</a>
              </li>
              <li class="nav-item mr-3 mr-md-0">
                <a href="landing-4.html" class="nav-link fade-page px-0 py-2">Coaching minceur</a>
              </li>
              <li class="nav-item mr-3 mr-md-0">
                <a href="landing-5.html" class="nav-link fade-page px-0 py-2">Aide</a>
              </li>
              <li class="nav-item mr-3 mr-md-0">
                <a href="landing-6.html" class="nav-link fade-page px-0 py-2">Nous contacter</a>
              </li>
            </ul>
          </div>
          <div class="col-xl-auto mr-xl-5 col-md-3">
            <h5>Nos Produits</h5>
            <ul class="nav flex-row flex-md-column">
              <li class="nav-item mr-3 mr-md-0">
                <a href="company-about-1.html" class="nav-link fade-page px-0 py-2">Brulafine</a>
              </li>
              <li class="nav-item mr-3 mr-md-0">
                <a href="blog-listing-1.html" class="nav-link fade-page px-0 py-2">C-Konjac</a>
              </li>
            </ul>
          </div>
          <div class="col-xl-auto mr-xl-5 col-md-3">
            <h5>Informations</h5>
            <ul class="nav flex-row flex-md-column">
              <li class="nav-item mr-3 mr-md-0">
                <a href="blog-listing-1.html" class="nav-link fade-page px-0 py-2">Charte de confidentialité</a>
              </li>
              <li class="nav-item mr-3 mr-md-0">
                <a href="blog-listing-1.html" class="nav-link fade-page px-0 py-2">C.G.U.</a>
              </li>
              <li class="nav-item mr-3 mr-md-0">
                <a href="blog-listing-1.html" class="nav-link fade-page px-0 py-2">C.G.V.</a>
              </li>
              <li class="nav-item mr-3 mr-md-0">
                <a href="blog-listing-1.html" class="nav-link fade-page px-0 py-2">Cookies</a>
              </li>
              <li class="nav-item mr-3 mr-md-0">
                <a href="blog-listing-1.html" class="nav-link fade-page px-0 py-2">Mentions légales</a>
              </li>
            </ul>
          </div>
          <div class="col mt-4 mt-md-0 mt-lg-5 mt-xl-0 order-lg-4 order-xl-3">
            <h5>Suivez nous</h5>
            <ul class="list-unstyled d-flex flex-wrap">
              <li class="col-12 col-lg-6 col-xl-12 px-0">
                <div class="row my-2 my-md-3">
                  
                  <div class="col">
                    <a class="h6" href="#">CASTALIS OOD</a>
                    <div class="text-small text-muted mt-2">28 Golash Street, Ent. A, Ground Floor, Studio 3, District Slatina, Sofia, 1505 Bulgarie</div>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <hr>
          </div>
        </div>
        <div class="row flex-column flex-lg-row align-items-center justify-content-center justify-content-lg-between text-center text-lg-left">
          <div class="col-auto">
            <div class="d-flex flex-column flex-sm-row align-items-center text-small">
              <div class="text-muted">© Castalis Innovation, 2016-2020 
              </div>
            </div>
          </div>
          <div class="col-auto mt-3 mt-lg-0">
            <ul class="list-unstyled d-flex mb-0">
              <li class="mx-3">
                <a href="#" class="hover-fade-out">
                  <img src="assets/img/icons/social/dribbble.svg" alt="Dribbble" class="icon icon-xs bg-white" data-inject-svg>
                </a>
              </li>
              <li class="mx-3">
                <a href="#" class="hover-fade-out">
                  <img src="assets/img/icons/social/twitter.svg" alt="Twitter" class="icon icon-xs bg-white" data-inject-svg>
                </a>
              </li>
              <li class="mx-3">
                <a href="#" class="hover-fade-out">
                  <img src="assets/img/icons/social/github.svg" alt="Github" class="icon icon-xs bg-white" data-inject-svg>
                </a>
              </li>
              <li class="mx-3">
                <a href="#" class="hover-fade-out">
                  <img src="assets/img/icons/social/facebook.svg" alt="Facebook" class="icon icon-xs bg-white" data-inject-svg>
                </a>
              </li>
              <li class="mx-3">
                <a href="#" class="hover-fade-out">
                  <img src="assets/img/icons/social/google.svg" alt="Google" class="icon icon-xs bg-white" data-inject-svg>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <a href="#top" class="btn btn-primary rounded-circle btn-back-to-top" data-smooth-scroll data-aos="fade-up" data-aos-offset="2000" data-aos-mirror="true" data-aos-once="false">
      <img src="assets/img/icons/interface/icon-arrow-up.svg" alt="Icon" class="icon bg-white" data-inject-svg>
    </a>

{% endblock %}

{% block javascripts %}
  <!-- Required vendor scripts (Do not remove) -->
  <script type="text/javascript" src="{{ asset('assets/js/jquery.min.js')}}"></script>
  <script type="text/javascript" src="{{ asset('assets/js/popper.min.js')}}"></script>
  <script type="text/javascript" src="{{ asset('assets/js/bootstrap.js')}}"></script>

  <!-- Optional Vendor Scripts (Remove the plugin script here and comment initializer script out of index.js if site does not use that feature) -->

  <!-- AOS (Animate On Scroll - animates elements into view while scrolling down) -->
  <script type="text/javascript" src="{{ asset('assets/js/aos.js')}}"></script>
  <!-- Clipboard (copies content from browser into OS clipboard) -->
  <script type="text/javascript" src="{{ asset('assets/js/clipboard.min.js')}}"></script>
  <!-- Fancybox (handles image and video lightbox and galleries) -->
  <script type="text/javascript" src="{{ asset('assets/js/jquery.fancybox.min.js')}}"></script>
  <!-- Flatpickr (calendar/date/time picker UI) -->
  <script type="text/javascript" src="{{ asset('assets/js/flatpickr.min.js')}}"></script>
  <!-- Flickity (handles touch enabled carousels and sliders) -->
  <script type="text/javascript" src="{{ asset('assets/js/flickity.pkgd.min.js')}}"></script>
  <!-- Ion rangeSlider (flexible and pretty range slider elements) -->
  <script type="text/javascript" src="{{ asset('assets/js/ion.rangeSlider.min.js')}}"></script>
  <!-- Isotope (masonry layouts and filtering) -->
  <script type="text/javascript" src="{{ asset('assets/js/isotope.pkgd.min.js')}}"></script>
  <!-- jarallax (parallax effect and video backgrounds) -->
  <script type="text/javascript" src="{{ asset('assets/js/jarallax.min.js')}}"></script>
  <script type="text/javascript" src="{{ asset('assets/js/jarallax-video.min.js')}}"></script>
  <script type="text/javascript" src="{{ asset('assets/js/jarallax-element.min.js')}}"></script>
  <!-- jQuery Countdown (displays countdown text to a specified date) -->
  <script type="text/javascript" src="{{ asset('assets/js/jquery.countdown.min.js')}}"></script>
  <!-- jQuery smartWizard facilitates steppable wizard content -->
  <script type="text/javascript" src="{{ asset('assets/js/jquery.smartWizard.min.js')}}"></script>
  <!-- Plyr (unified player for Video, Audio, Vimeo and Youtube) -->
  <script type="text/javascript" src="{{ asset('assets/js/plyr.polyfilled.min.js')}}"></script>
  <!-- Prism (displays formatted code boxes) -->
  <script type="text/javascript" src="{{ asset('assets/js/prism.js')}}"></script>
  <!-- ScrollMonitor (manages events for elements scrolling in and out of view) -->
  <script type="text/javascript" src="{{ asset('assets/js/scrollMonitor.js')}}"></script>
  <!-- Smooth scroll (animation to links in-page)-->
  <script type="text/javascript" src="{{ asset('assets/js/smooth-scroll.polyfills.min.js')}}"></script>
  <!-- SVGInjector (replaces img tags with SVG code to allow easy inclusion of SVGs with the benefit of inheriting colors and styles)-->
  <script type="text/javascript" src="{{ asset('assets/js/svg-injector.umd.production.js')}}"></script>
  <!-- TwitterFetcher (displays a feed of tweets from a specified account)-->
  <script type="text/javascript" src="{{ asset('assets/js/twitterFetcher_min.js')}}"></script>
  <!-- Typed text (animated typing effect)-->
  <script type="text/javascript" src="{{ asset('assets/js/typed.min.js')}}"></script>
  <!-- Required theme scripts (Do not remove) -->
  <script type="text/javascript" src="{{ asset('assets/js/theme.js')}}"></script>
  
    <link href="{{ asset('assets/Notification/css/ussal-notification.css')}}" rel="stylesheet" type="text/css" media="all" />

  <script type="text/javascript" src="{{ asset('assets/Notification/js/ussal-notification.js')}}"></script>
  <!-- Removes page load animation when window is finished loading -->
  <script src="https://js.stripe.com/v3/"></script>
  <script type="text/javascript">
    window.addEventListener("load",function(){
      document.querySelector('body').classList.add('loaded');
    });
    $('.toggle-cart').click(function(){
      $('.cart-wrapper').toggleClass('open');
    })
    $(".open-modal-payment").click(function(){
      $("#modal-payment").modal({backdrop: "static"});
    });
    $("#modal-payment").on('click', '.open-sign-in-modal', (function(event){
      $("#sign-in-modal").modal({backdrop: "static"});
    }));
    $('.close-alert-msg').click(function(){
      $('#modal-payment .alert-dismissible').css('display','none');
    });
  </script>

<script type="text/javascript">
   function toggleMute() {
          var video=document.getElementById("videoHeader");
          if(video.muted){
            video.muted = false;
          } else {
            debugger;
            video.muted = true;
          }
          var sound = localStorage.getItem('sound');
          localStorage.setItem('sound', !sound);
   }

   var LENGTH_CARD = 0;
   var prods = [];

   function addToCardForm(id,price,name,img){
      var modal = $("#add-product-modal");
      $("#add-product-modal .product-image").attr('src','{{asset("assets/img/products")}}/'+img);
      $("#add-product-modal .product-name").html(name);
      $("#add-product-modal .product-id-input").val(id);
      $("#add-product-modal .product-price").html(price+"€");
      $("#add-product-modal .product-price-input").html(id);
      $("#add-product-modal .product-quantity-input").val(1);
   }

   function itemProduct(id,img, name, quantity, price, oldprice){
      return '<div class="product-item product-'+id+'">'+
            '<img src="{{asset("assets/img/products")}}/'+img+'" class="product-img">'+
            '<ul class="detail-list">'+
              '<li class="detail-item product-name">'+
                name+
              '</li>'+
              '<li class="detail-item product-qte">'+
               quantity+' x '+price+'€ <strike>'+oldprice+'€</strike>'+
              '</li>'+
              '<li class="detail-item product-etat">'+
                '<span style="color: #009b7 !important; cursor: pointer; font-weight: 700;" onclick="addToCard('+id+',0)">supprimé</span>'+
              '</li>'+
            '</ul>'+
          '</div>';
   }
   function itemFormule(id, name, quantity, price){
      return '<div class="product-item formule-'+id+'">'+
            '<img src="{{asset("assets/img/products/avatar.png")}}" class="product-img">'+
            '<ul class="detail-list">'+
              '<li class="detail-item product-name">Abonnement '+
                name+
              '</li>'+
              '<li class="detail-item product-qte">'+
               +price+'€ valables <span>'+quantity+' mois</span>'+
              '</li>'+
              '<li class="detail-item product-etat">'+
                '<a href="javascript:void" onclick=" addFormuleToCard('+id+',0)">supprimé</a>'+
              '</li>'+
            '</ul>'+
          '</div>';
   }

   function itemCoupon(id,name, value){
      return '<li class="item coupon-'+id+'">'+
                '<span>Réduction:</span>'+
                '<span>'+name+' (-'+value+')</span>'+
              '</li>';
   }
   function addCouponToCard(target,qty=1){
      var code = $(target).val();
      addToCard(code,qty,"coupon");
   }
   function addFormuleToCard(id,qty=1){
      addToCard(id,qty,"formule");
    }
  function synch_card(){
    var x = window.localStorage.getItem('panier');
    if(x){
       prods = JSON.parse(x);

       prods.forEach(function(item, index){
          console.log("add "+item.type+" : "+item.id);
          addToCard(item.id,item.qty,item.type);
       })

       window.localStorage.removeItem('panier');
    }
  } 
  function addToCard(id=-1,qty=-1,type="product"){
    $.ajax({
         contentType: "application/json",
         dataType: "json",
         url: "{{ path('api_use_connected') }}",
         beforeSend: function( xhr ) {
          $('.btn-add-to-card').css('pointer-events','none');
          $('.btn-add-to-card').text('Ajout...');
         }
       })
    .done(function( data ) {
       if(data.status==200){
          addToCard_connected(id,qty,type);
          
       }else{
          addToCard_not_connected(id,qty,type);
       }
    });
  }
  function refreshCard(show){
    $.ajax({
                 contentType: "application/json",
                 dataType: "json",
                 url: "{{ path('api_use_connected') }}",
                 beforeSend: function( xhr ) {
                 }
               })
            .done(function( data ) {
               if(data.status==200){
                  refreshCard_connected(show);
                  
               }else{
                  refreshCard_not_connected(show);
               }
            });
  }
        function addToCard_connected(id=-1,qty=-1,type="product"){
            if(id == -1){
               id = $("#add-product-modal .product-id-input").val();
            }
            if(qty == -1){
               qty = $("#add-product-modal .product-quantity-input").val();
            }
            $.ajax({
                 contentType: "application/json",
                 dataType: "json",
                 data:{
                     product:id,
                     quantity:qty,
                     type:type
                 },
                 url: "{{ path('commande_add_to_card') }}",
                 beforeSend: function( xhr ) {}
               })
            .done(function( data ) {
               if(data.status==200){
                  refreshCard(true);
                  notification("Modification du Panier",data.message,"success");
                  
                  LENGTH_CARD++;
                  if(prods.length == LENGTH_CARD ){
                    if($paidLaunch){
                      $('#modal-payment button.submit').text('Initialisation paiement');
                      $paidLaunch = false;
                      proceedPayment();
                    }
                  }
               }else{
                  notification("Modification du Panier",data.message,"error");
               }
               $('.btn-add-to-card').css('pointer-events','auto');
               $('.btn-add-to-card').text('Ajout au panier');
               $('#add-product-modal').modal('hide');
            });
        }
        function refreshCard_connected(show){
            $.ajax({
              contentType: "application/json",
              dataType: "json",
              url: "{{ path('commande_get_card') }}",
              beforeSend: function( xhr ) {
                
              }
            })
            .done(function( data ) {
              console.log(data);
                if(data.panier.coupons.length == 0 && data.panier.formules.length == 0 && data.panier.products.length==0){
                  $('.cart-container').css('display', 'none');
                  $('.empty-cart').css('display', 'block');
                }
                else{
                  $('.cart-container').css('display', 'block');
                  $('.empty-cart').css('display', 'none');
                }
               if(data.status==200){
                  var total = (data.panier.total-data.panier.reduction)<0?0:data.panier.total-data.panier.reduction;
                  $(".cart-total-pay").html(total.toFixed(2));
                  $(".cart-total-reduction").html(data.panier.total.toFixed(2));
                  $(".card-list-product").html("");
                   data.panier.products.forEach(function(item, index){
                     $(".card-list-product").append(itemProduct(item.id_product,item.img, item.name, item.quantity, item.price, item.oldprice));
                   }); 
                  $(".card-list-coupon").html("");
                   data.panier.coupons.forEach(function(item, index){
                     $(".card-list-coupon").append( itemCoupon(item.id,item.code, item.value));
                   });
                  $(".card-list-formule").html("");
                   data.panier.formules.forEach(function(item, index){
                     $(".card-list-formule").append( itemFormule(item.id,item.name,item.month,item.price));
                   });
               }else{
                  console.log(data.message);
               }
               if(show && !$(".cart-wrapper").hasClass("open"))
                     $(".cart-wrapper").addClass("open");
              });
        }
        synch_card();
        
      /**
      ** USER NOT CONNECTED
      **/
        function addToCard_not_connected(id=-1,qty=-1,type="product"){
            if(id == -1){
               id = $("#add-product-modal .product-id-input").val();
            }
            if(qty == -1){
               qty = $("#add-product-modal .product-quantity-input").val();
            }

            var x = window.localStorage.getItem('panier');
            var prods = [];
            if(x){
               prods = JSON.parse(x);
            }
            

            $.ajax({
                 contentType: "application/json",
                 dataType: "json",
                 data:{
                     product:id,
                     quantity:qty,
                     type:type,
                     products:prods
                 },
                 url: "{{ path('commande_add_to_card_not_connected') }}",
                 beforeSend: function( xhr ) {}
               })
            .done(function( data ) {
               if(data.status==200){
                  window.localStorage.setItem('panier', JSON.stringify(data.panier) );
                  refreshCard(true);

                  notification("Modification du Panier",data.message,"success");
               }else{
                  notification("Modification du Panier",data.message,"error");
                  $('#modal-payment button.submit').text('Valider');
               }
               $('.btn-add-to-card').css('pointer-events','auto');
               $('.btn-add-to-card').text('Ajout au panier');
               $('#add-product-modal').modal('hide');
            });
        }
        function refreshCard_not_connected(show){
            var x = window.localStorage.getItem('panier');
            var prods = [];
            if(x){
               prods = JSON.parse(x);
            }
            $.ajax({
              contentType: "application/json",
               dataType: "json",
               data:{ products:prods },
              url: "{{ path('commande_get_card_not_connected') }}",
              beforeSend: function( xhr ) {
                
              }
            })
            .done(function( data ) {
              if(data.coupons && data.coupons.length == 0 && data.formules.length == 0 && data.produits.length==0){
                  $('.cart-container').css('display', 'none');
                  $('.empty-cart').css('display', 'block');
                }
                else{
                  $('.cart-container').css('display', 'block');
                  $('.empty-cart').css('display', 'none');
                }
               if(data.status==200){
                  var total = (data.panier.total-data.panier.reduction)<0?0:data.panier.total-data.panier.reduction;
                  $(".cart-total-pay").html(total.toFixed(2));
                  $(".cart-total-reduction").html(data.panier.total.toFixed(2));
                  $(".card-list-product").html("");
                   data.panier.products.forEach(function(item, index){
                     $(".card-list-product").append(itemProduct(item.id_product,item.img, item.name, item.quantity, item.price, item.oldprice));
                   }); 
                  $(".card-list-coupon").html("");
                   data.panier.coupons.forEach(function(item, index){
                     $(".card-list-coupon").append( itemCoupon(item.id,item.code, item.value));
                   });
                  $(".card-list-formule").html("");
                   data.panier.formules.forEach(function(item, index){
                     $(".card-list-formule").append( itemFormule(item.id,item.name,item.month,item.price));
                   });
               }else{
                  console.log(data.message);
               }
               if(show && !$(".cart-wrapper").hasClass("open"))
                     $(".cart-wrapper").addClass("open");
              });
        }
  
</script>
<script type="text/javascript">
        $paidLaunch = false;
        var stripe = Stripe("{{STRIPE_PUBLIC_KEY}}");

        var elements = stripe.elements();
        var style = {
          base: {
            color: '#32325d',
            fontFamily: '"Helvetica Neue", Helvetica, sans-serif',
            fontSmoothing: 'antialiased',
            fontSize: '16px',
            '::placeholder': {
              color: '#aab7c4'
            }
          },
          invalid: {
            color: '#fa755a',
            iconColor: '#fa755a'
          }
        };

        // Create an instance of the card Element.
        var card = elements.create('card', {
            style: style,
            hidePostalCode : true
        });

        // Add an instance of the card Element into the `card-element` <div>.
        card.mount('#card-element');

        // Handle real-time validation errors from the card Element.
        card.addEventListener('change', function(event) {
          var displayError = document.getElementById('card-errors');
          if (event.error) {
            displayError.textContent = event.error.message;
          } else {
            displayError.textContent = '';
          }
        });

        // Handle form submission.
        var form = document.getElementById('payment-form');
        form.addEventListener('submit', function(event) {
          $('#modal-payment button.submit').css('pointer-events','none');
            event.preventDefault();
            function validate(){
                try{
                    var validator = $('#payment-form').validate({
                        rules:{
                            name:{
                                required:true
                            },
                            email:{
                                required:true,
                                email:true
                            },
                        }
                    });
                    
                    var $validated = $('#payment-form').valid();
                    return $validated;
                }catch(error){
                    console.log(error)
                }
            }
            var ownerInfo = {
                owner: {},
            };
            stripe.createSource(card, ownerInfo).then(function(result) {
                if (!validate() || result.error) {
                  var errorElement = document.getElementById('card-errors');
                  errorElement.textContent = result.error.message;
                  $('#modal-payment button.submit').css('pointer-events','auto');
                } else {
                  stripeSourceHandler(result.source);
                }
            });
        });

        function stripeSourceHandler(source) {
          $('#modal-payment button.submit').css('pointer-events','none');
            $('.lds-ripple').css('display','inline-block');
            // Insert the source ID into the form so it gets submitted to the server
            var form = document.getElementById('payment-form');
            var hiddenInput = document.createElement('input');
            hiddenInput.setAttribute('type', 'hidden');
            hiddenInput.setAttribute('name', 'stripeSource');
            hiddenInput.setAttribute('value', source.id);
            form.appendChild(hiddenInput);

            // Submit the form
            //form.submit();

            checklogin();
        }

        function checklogin(){
          $.ajax({
             contentType: "application/json",
             dataType: "json",
             url: "{{ path('api_use_connected_or_exist') }}",
             data: {
              name: $('#payment-form input[name=name]').val(),
              email: $('#payment-form input[name=email]').val()
             },
             beforeSend: function( xhr ) {
              $('#modal-payment button.submit').text('Verification connexion...');
             }
           })
          .done(function( data ) {
              /* l'user est loggé ou compte nouvellement crée */
              if(data.status == 200){
                var x = window.localStorage.getItem('panier');
                if(x){
                  $('#modal-payment button.submit').text('Enregistrement de la commande...');
                  $paidLaunch = true;
                  synch_card();
                }
                else
                  proceedPayment();
              }
              else{
                $('#modal-payment button.submit').css('pointer-events','auto');
                $('.lds-ripple').css('display','none');
                $('#modal-payment button.submit').text('Valider');

                $("#modal-payment .alert-dismissible").show().delay(60000).fadeOut();
                $('#modal-payment .alert-dismissible').removeClass('alert-success');
                $('#modal-payment .alert-dismissible').addClass('alert-danger');
                $('#modal-payment .alert-dismissible .text').html(data.message);
              }
          });
        }

        function proceedPayment(){
          $('#modal-payment button.submit').text('Initialisation paiement');
            var form = document.getElementById('payment-form');
            oData = new FormData(form);
            var oReq = new XMLHttpRequest();
            oReq.open("POST", $('#payment-form').attr('action'), true);
            oReq.onload = function(oEvent) {
                if (oReq.status == 200) {
                    $(".success-checkmark").show().delay(3000).fadeOut();
                    $(".check-icon").show().show().delay(3000).fadeOut();
                    notification("Paiement commande",oReq.response,"success");
                    card.clear();
                    $('#modal-payment button.submit').css('pointer-events','auto');
                    $('.lds-ripple').css('display','none');

                    $("#modal-payment .alert-dismissible").show().delay(40000).fadeOut();
                    $('#modal-payment .alert-dismissible').removeClass('alert-danger');
                    $('#modal-payment .alert-dismissible').addClass('alert-success');
                    $('#modal-payment .alert-dismissible .text').text(oReq.response);
                    $('#modal-payment button.submit').text('Valider');
                    window.localStorage.removeItem('panier');
                }else {
                    notification("Paiement commande",oReq.response,"error");
                    $('#modal-payment button.submit').css('pointer-events','auto');
                    $('.lds-ripple').css('display','none');
                    $('#modal-payment button.submit').text('Valider');

                    $("#modal-payment .alert-dismissible").show().delay(60000).fadeOut();
                    $('#modal-payment .alert-dismissible').removeClass('alert-success');
                    $('#modal-payment .alert-dismissible').addClass('alert-danger');
                    $('#modal-payment .alert-dismissible .text').html(oReq.response);
                }
            };
            oReq.send(oData);  
        }

        $('.oneClickPaid').click(function(e){
          $(this).text('Initialisation paiement...');
          $(this).css('pointer-events', 'none');
          var $url = $(this).attr("href");
          proceed($url, $(this));
          e.preventDefault();
        });
        function proceed($url, $that){
          $.ajax({
              url: $url,
              type: "GET",
              dataType: "json",
              async: true,
              data: {},
              success: function(data, status) {
                $that.css('pointer-events', 'auto');
                $that.text("Payer en 1 click");
                notification("Paiement commande","Opération effectuée avec succèss","success");
                window.localStorage.removeItem('panier');
                
              },
              error: function(xhr, textStatus, errorThrown) {
                $that.css('pointer-events', 'auto');
                $that.text("Payer en 1 click");
                notification("Paiement commande",errorThrown,"error");
              }
          });
        }
</script>

<script type="text/javascript">
  function validateContactForm(){
    try{
      var validator = $('#AjaxLogin').validate({
          rules:{
              email:{
                  required:true,
                  email:true
              }, 
              password:{
                  required:true
              }            
          }
      });
      
      var $validated = $('#AjaxLogin').valid();
      return $validated;
      }catch(error){
          console.log(error)
      }
    }

    var form = document.forms.namedItem("AjaxLogin");
    form.addEventListener('submit', function(ev) {
      if( !validateContactForm()){
        toastr.error("Veuillez renseigner toutes les informations.");
          $('#AjaxLogin button[type=submit]').text("Je m'inscris !");
            ev.preventDefault();
            return false;
        }

        $('.lds-ripple').css('display','inline-block');
        $('#AjaxLogin button[type=submit]').css('pointer-events','none');
       $.ajax({
            url:"{{path('login_ajax')}}",
            type:"POST",
            data: new FormData(this),
              dataType: 'json',
              contentType: false,
              cache: false,
              processData:false,
            //data:$('#formTournoi').serialize(),
            success:function(response) {
              notification("Connexion","Vous etes connecté maintenant","success");
              $('.lds-ripple').css('display','none');
              $('#AjaxLogin button[type=submit]').css('pointer-events','auto');
              $(".success-checkmark").show().delay(3000).fadeOut();
              $(".check-icon").show().show().delay(3000).fadeOut();
              setTimeout(function(){
                $( "#sign-in-modal button.close" ).trigger( "click" );
              },1000);
            },
            error:function(response){
              notification("Connexion","Identifiant incorrect","error");
              $('#AjaxLogin button[type=submit]').button('reset');
              $('.lds-ripple').css('display','none');
              $('#AjaxLogin button[type=submit]').css('pointer-events','auto');
          }
        });
        
      ev.preventDefault();
    }, false);

</script>
<script type="text/javascript">
  $(document).ready(function() {

     {% if is_granted('IS_AUTHENTICATED_FULLY') %}
         synch_card();
     {% endif %}
      refreshCard();
   });
</script>
<div id="config-js">

    {{  render(controller('App\\Controller\\ApiConfigController::getScripts') )  }}



</div>
{% endblock %}
